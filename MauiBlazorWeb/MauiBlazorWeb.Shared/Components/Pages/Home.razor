@page "/"

@using MauiBlazorWeb.Shared.Components.Dialogs
@using Models
@using Interfaces

@inject IAppState _appState

@if (!_appState.IsLoggedIn)
{
	<h1>Welcome to LifeTracker</h1>
	<LoginPrompt />
}
else
{
	<h1>This your dashboard</h1>
	@if (_appState.ExistingUsers == null)
	{
		<p><em>Loading...</em></p>
	}
	else
	{
		foreach (var acc in _appState.ExistingUsers)
		{
			<p>
				@acc.Username @acc.Gender @acc.Admin
			</p>
		}
	}
}

@code
{
	protected override async Task OnInitializedAsync()
	{
		await InvokeAsync(() => _appState.Title = "Home");
		await InvokeAsync(() => _appState.MainLayout.RerenderLayout());
	}
}