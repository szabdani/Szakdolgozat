@page "/"

@using MauiBlazorWeb.Shared.Components.Dialogs
@using Models
@using Interfaces

@inject IAppState _appState

@if (_appState.IsLoggedIn)
{
	<h1>This your dashboard</h1>
}
else
{
	<h1>Welcome to LifeTracker</h1>

	<p>Get started by logging in!
		<br/>
		Or if you don't have an account register one!
	</p>
	<a type="button" class="btn btn-primary" href=Register>Register here!</a>
	<a type="button" class="btn btn-info" href=Login>Login here!</a>

	
}

<button @onclick="RunLongTask">Run Long Task</button>

@code
{
	[CascadingParameter] public Action RerenderLayout { get; set; }
	[CascadingParameter] public Action<bool> SetLoadingScreen { get; set; }
	protected override async Task OnInitializedAsync()
	{
		await InvokeAsync(() => _appState.Title = "Home");
		await InvokeAsync(() => RerenderLayout?.Invoke());
	}
	
	private async Task RunLongTask()
	{
		await InvokeAsync(() => SetLoadingScreen?.Invoke(true));
		await Task.Delay(2000); // Simulate a long-running task
		await InvokeAsync(() => SetLoadingScreen?.Invoke(false));
	}
}