@inherits DiaryCompBase

@using Bases
@inject NavigationManager Navigation

<Calendar Title="Complete diary days" SpecialDates="uniqueDates" OnDayClickAction="OpenDay" FirstDate="firstDate"/>

@code {
	private List<DateTime> uniqueDates;

	public HomeCalendar()
	{
		IsHabit = false;
		uniqueDates = new List<DateTime>();
	}

	protected override async Task UpdateTables()
	{
		await base.UpdateTables();
		//var posts = allPosts.Where(p => p.Diary_log_column_Id == colId).ToList();
		//doneDates = posts.Where(p => p.Value == "X").Select(p => p.Date).Distinct().ToList();
		uniqueDates = allPosts.Select(obj => obj.Date).Distinct().ToList();
	}

	private async Task OpenDay(DateTime day)
	{
		Navigation.NavigateTo(day.ToString("yyyy-MM-dd"));
		await Task.CompletedTask;
	}
}
